# -*- coding: utf-8 -*-
"""
アプリケーション設定管理クラス

config.yaml を読み込み、各種サービス（PostgreSQL, MongoDB, Keycloak 等）の設定を提供します。
"""

# ------------------------------------------------------------------------------
# インポート
# ------------------------------------------------------------------------------
import yaml


# ------------------------------------------------------------------------------
# コンフィグ管理クラス
# ------------------------------------------------------------------------------
class Config:
    """
    YAML形式の設定ファイルを読み込み、設定値へアクセスするためのヘルパークラス
    """

    def __init__(self, file_path: str = "config.yaml"):
        """
        コンストラクタで YAML ファイルを読み込み、内部データとして保持

        Parameters:
            file_path (str): 設定ファイルのパス（デフォルトは "config.yaml"）
        """
        with open(file_path, "r") as f:
            self._data = yaml.safe_load(f)

    # --------------------------------------------------------------------------
    # PostgreSQL設定の取得
    # --------------------------------------------------------------------------
    @property
    def postgres(self):
        """
        PostgreSQL 接続設定情報を返す
        """
        return self._data["postgres"]

    # --------------------------------------------------------------------------
    # MongoDB設定の取得
    # --------------------------------------------------------------------------
    @property
    def mongodb(self):
        """
        MongoDB 接続設定情報を返す
        """
        return self._data["mongodb"]

    # --------------------------------------------------------------------------
    # NATS設定の取得
    # --------------------------------------------------------------------------
    @property
    def nats(self):
        """
        NATS 接続設定情報を返す
        """
        return self._data["nats"]

    # --------------------------------------------------------------------------
    # Keycloak設定の取得（任意項目）
    # --------------------------------------------------------------------------
    @property
    def keycloak(self):
        """
        Keycloak 認証設定情報を返す（未設定時は空dictを返す）
        """
        return self._data.get("keycloak", {})

    # --------------------------------------------------------------------------
    # セッション設定の取得（任意項目）
    # --------------------------------------------------------------------------
    @property
    def session(self):
        """
        セッション制御に関する設定情報を返す（未設定時は空dictを返す）
        """
        return self._data.get("session", {})